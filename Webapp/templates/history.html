<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>History - Stroke Risk Assessment</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
<div class="app-container">

    <!-- Main Title -->
    <div class="main-title">
        <h1>AI Brain Stroke Risk Assessment System</h1>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-links">
            <a href="/dashboard">Dashboard</a>
            <a href="/profile">Profile</a>
            <a href="/history" class="active">History</a>
            <a href="/logout" class="logout-btn">Logout</a>
        </div>
    </nav>

    <header class="app-header">
        <h1>ğŸ“Š Assessment History</h1>
        <p>View your past stroke risk assessments</p>
    </header>

    {% if predictions %}
    <div class="history-container">
        {% for pred in predictions %}
        <div class="history-card">
            <div class="history-header">
                <div class="history-date">ğŸ“… {{ pred.prediction_date[:16] }}</div>
                <div class="history-risk {% if pred.probability >= 60 %}risk-high{% elif pred.probability >= 30 %}risk-moderate{% else %}risk-low{% endif %}">
                    {{ "%.1f"|format(pred.probability) }}% Risk
                </div>
            </div>
            
            <div class="history-details">
                <div class="detail-row">
                    <span class="detail-label">Age:</span>
                    <span class="detail-value">{{ pred.age }} years</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Gender:</span>
                    <span class="detail-value">{{ pred.gender }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Hypertension:</span>
                    <span class="detail-value">{{ "Yes" if pred.hypertension else "No" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Heart Disease:</span>
                    <span class="detail-value">{{ "Yes" if pred.heart_disease else "No" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Glucose Level:</span>
                    <span class="detail-value">{{ "%.1f"|format(pred.avg_glucose_level) }} mg/dL</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">BMI:</span>
                    <span class="detail-value">{{ "%.1f"|format(pred.bmi) }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Smoking:</span>
                    <span class="detail-value">{{ pred.smoking_status }}</span>
                </div>
            </div>
            
            <div class="history-result">
                {% if pred.prediction_result == 1 %}
                <span class="result-badge result-high">âš ï¸ Elevated Risk Detected</span>
                {% else %}
                <span class="result-badge result-low">âœ“ Low Risk</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ğŸ“‹</div>
        <h3>No Assessment History</h3>
        <p>You haven't completed any stroke risk assessments yet.</p>
        <a href="/dashboard" class="submit-btn" style="display: inline-block; margin-top: 20px;">Take Your First Assessment</a>
    </div>
    {% endif %}

</div>

</body>
</html>
